<section data-ng-controller="StatusController">
  <div class="page-header">
    <h1>
      Application Status 
    </h1>
  </div>
  <div id="status" class="row">
    <div class="col-md-9">
      
      <h4>Sync Status</h4>
      <table class="table" data-ng-init="getSync()">
        <tbody>
        <tr data-ng-show="syncError">  
          <td colspan="2"> <span class="text-danger"> {{ syncError }} </span>
        <tr data-ng-show="sync.error">  
          <td colspan="2"> <span class="text-danger"> {{ sync.err }} </span>
        </tr>
        <tr>
          <td>Sync Progress</td>
          <td> 
          <div class="progress">
            <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: {{(100 * sync.syncedBlocks/sync.blocksToSync)| number:2}}%">
                <span>{{(100 * sync.syncedBlocks/sync.blocksToSync)| number:2}}% Complete</span>
              </div>
          </div>
        </tr>
        <tr>
          <td>Blocks to Sync</td>
          <td class="text-right">{{sync.blocksToSync}}</td>
        </tr>
        <tr>
          <td>Synced Blocks</td>
          <td class="text-right">{{sync.syncedBlocks}}</td>
        </tr>
        <tr>
          <td>Start</td>
          <td class="text-right">
            <a href="/block/{{sync.start}}">{{sync.start}}</a>
            <span data-ng-show="sync.isStartGenesis"> (genesisBlock)</span>
          </td>
        </tr>
        <tr>
          <td>End</td>
          <td class="text-right">
            <a href="/block/{{sync.end}}">{{sync.end}}</a>
            <span data-ng-show="sync.isEndGenesis"> (genesisBlock)</span>
          </td>
        </tr>
        <tr>
          <td>Sync properties</td>
          <td class="text-right">
            <ul>  
              <li  data-ng-show="sync.upToExisting"> <span> Stops at existing block </span>
              <li>
                <span data-ng-show="sync.scanningBackward"> Backward Scan</span>
                <span data-ng-hide="sync.scanningBackward"> Forward Scan</span>
            </ul>  
          </td>
        </tr>
        </tbody>
      </table>
    
      <h4>Transaction Output Set Information</h4>
      <table class="table" data-ng-init="getStatus('TxOutSetInfo')">
        <tbody>
        <tr data-ng-show="!txoutsetinfo &amp;&amp; !infoError">
          <td colspan="2" class="text-center">Loading...</td>
        </tr>
        <tr data-ng-show="infoError">
          <td colspan="2" class="text-danger">{{infoError}}</td>
        </tr>
        <tr>
          <td>Height</td>
          <td class="text-right"><a href="/block-index/{{txoutsetinfo.height}}">{{txoutsetinfo.height}}</a></td>
        </tr>
        <tr>
          <td>Best Block</td>
          <td class="text-right"><a href="/block/{{txoutsetinfo.bestblock}}">{{txoutsetinfo.bestblock}}</a></td>
        </tr>
        <tr>
          <td>Transactions</td>
          <td class="text-right"> {{txoutsetinfo.transactions}}</td>
        </tr>
        <tr>
          <td>Transaction Outputs</td>
          <td class="text-right">{{txoutsetinfo.txouts}}</td>
        </tr>
        <tr>
          <td>Bytes Serialized</td>
          <td class="text-right">{{txoutsetinfo.bytes_serialized}}</td>
        </tr>
        <tr>
          <td>Hash Serialized</td>
          <td class="text-right">{{txoutsetinfo.hash_serialized}}</td>
        </tr>
        <tr>
          <td>Total Amount</td>
          <td class="text-right">{{txoutsetinfo.total_amount}}</td>
        </tr>
        </tbody>
      </table>
      
      <h4>Last Block</h4>
      <table class="table" data-ng-init="getStatus('LastBlockHash')">
        <tbody>
        <tr data-ng-show="!lastblockhash &amp;&amp; !infoError">
          <td colspan="2" class="text-center">Loading...</td>
        </tr>
        <tr data-ng-show="infoError">
          <td colspan="2" class="text-danger">{{infoError}}</td>
        </tr>
        <tr>
          <td>Last block hash</td>
          <td class="text-right"><a href="/block/{{lastblockhash}}">{{lastblockhash}}</a></td>
        </tr>
        </tbody>
      </table>
    </div> <!-- END OF COL-8 -->

    <div class="col-md-3">
      <div class="col-gray">
        <h4>Bitcoin node information</h4>
        <table class="table" data-ng-init="getStatus('Info')">
          <tbody>
          <tr data-ng-show="!info &amp;&amp; !infoError">
            <td colspan="2" class="text-center">Loading...
          <tr data-ng-show="infoError">
            <td colspan="2" class="text-danger">{{infoError}}
          <tr>
            <td>Version</td>
            <td class="text-right">{{info.version}}</td>
          </tr>
          <tr>
            <td>Protocol version</td>
            <td class="text-right">{{info.protocolversion}}</td>
          </tr>
          <tr>
            <td>Wallet version</td>
            <td class="text-right">{{info.walletversion}}</td>
          </tr>
          <tr>
            <td>Balance (BTC)</td>
            <td class="text-right">{{info.balance}}</td>
          </tr>
          <tr>
            <td>Blocks</td>
            <td class="text-right"><a href="/block-index/{{info.blocks}}">{{info.blocks}}</a></td>
          </tr>
          <tr>
            <td>Time Offset</td>
            <td class="text-right">{{info.timeoffset}}</td>
          </tr>
          <tr>
            <td>Connections to other nodes</td>
            <td class="text-right">{{info.connections}}</td>
          </tr>
          <tr>
            <td>Proxy setting</td>
            <td class="text-right">{{info.proxy}}</td>
          </tr>
          <tr>
            <td>Mining Difficulty</td>
            <td class="text-right">{{info.difficulty}}</td>
          </tr>
          <tr>
            <td>Testnet</td>
            <td class="text-right">{{info.testnet}}</td>
          </tr>
          <tr>
            <td>Keypool Oldest Date</td>
            <td class="text-right">{{info.keypoololdest*1000 | date:'medium' }}</td>
          </tr>
          <tr>
            <td>Keypool Size</td>
            <td class="text-right">{{info.keypoolsize}}</td>
          </tr>
          <tr>
            <td>Default Transaction Fee (BTC)</td>
            <td class="text-right">{{info.paytxfee}}</td>
          </tr>
          <tr>
            <td>Info Errors</td>
            <td class="text-right">{{info.infoErrors}}</td>
          </tr>
          </tbody>
        </table>

        <h4>Difficulty</h4>
        <table class="table" data-ng-init="getStatus('Difficulty')">
          <tbody>
          <tr data-ng-show="!difficulty &amp;&amp; !infoError">
            <td colspan="2" class="text-center">Loading...</td>
          </tr>
          <tr data-ng-show="infoError">
            <td colspan="2" class="text-danger">{{infoError}}</td>
          </tr>
   
          <tr>
            <td>Mining Difficulty</td>
            <td>{{difficulty}}</td>
          </tr>
          </tbody>
        </table>
      </div> <!-- END OF COL-GRAY -->
    </div> <!-- END OF COL-3 -->
  </div>
</section>

